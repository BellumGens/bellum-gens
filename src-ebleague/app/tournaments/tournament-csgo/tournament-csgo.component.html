<div class="overview-container-card">
  <igx-card type="outlined">
    <igx-card-header>
      <igx-avatar igxCardThumbnail [roundShape]="true" src="/assets/wallpapers/csgo-watermark.webp"></igx-avatar>
      <h1 igxCardHeaderTitle>CS:GO Лига</h1>
      <p><span class="highlight">ВАЖНО!</span> Финалите на Esports Business League протичат в плейофна фаза с директни елиминации. Всички срещи от финалите ще са във формат BO3. Поради небалансираното разпределение по групите, до четвъртфиналната фаза ще достигнат топ 5 отборите от Група А, както и топ 3 отборите от Група Б. 2 отбора от Група А ще бъдат изтеглени да играят на първият четвъртфинал, а другите 3 ще бъдат сийднати в останалите четвъртфинали и за всеки от тях ще се изтегли по един отбор от Група Б. Повече информация свързана с финалите можете да намерите на <a routerLink="/">заглавната ни станица</a>.</p>
    </igx-card-header>
    <igx-card-content>
      <app-csgo-tournament-schedule>
        <div class="participants-container">
          <h4 style="width: 100%">Участници</h4>
          <igx-circular-bar *ngIf="loading" [indeterminate]="true"></igx-circular-bar>
          <div *ngFor="let registration of registrations" class="registration-slot">
            <igx-avatar [src]="registration.Team.TeamAvatar"
                        [initials]="registration.Team.TeamName"
                        [title]="registration.Company"
                        size="medium"
                        roundShape="true">
            </igx-avatar>
            <igx-badge *ngIf="registration.UserId === authUser?.id && registration.State === 0"
                        type="warning"
                        icon="priority_high"
                        title="Вашата регистрация все още не е потвърдена! За да потвърдим регистрацията трябва да платите таксата за участие!"
                        class="registration-badge-style">
            </igx-badge>

            <a [href]="environment.bellumgens + '/team/' + registration.Team.CustomUrl" target="_blank">{{ registration.Team.TeamName }}</a>
          </div>
        </div>
      </app-csgo-tournament-schedule>

      <h4>Групи</h4>

      <igx-grid *ngFor="let group of groups" [autoGenerate]="true" [data]="group.Participants">

      </igx-grid>

      <div class="card-wrapper">
        <igx-card *ngFor="let group of groups">
          <igx-card-header>
            <igx-avatar igxCardThumbnail [roundShape]="true" src="/assets/wallpapers/csgo-watermark.webp"></igx-avatar>
            <h1 igxCardHeaderTitle>{{group.Name}}</h1>
          </igx-card-header>

          <igx-card-content class="group-card-content">
            <igx-list class="group-list">
              <igx-list-item *ngFor="let participant of group.Participants | sortByPoints:'TeamPoints'">

                <igx-avatar igxListThumbnail
                            [src]="participant.Team.TeamAvatar"
                            [initials]="participant.Team.TeamName"
                            [title]="participant.Company"
                            roundShape="true">
                </igx-avatar>

                <a [href]="environment.bellumgens + '/team/' + participant.Team.CustomUrl"
                   igxListLineTitle
                   target="_blank">
                  {{ participant.Team.TeamName }}
                </a>

                <span igxListAction>{{ participant.TeamPoints }} точки</span>
              </igx-list-item>
            </igx-list>
          </igx-card-content>
        </igx-card>
      </div>
    </igx-card-content>
  </igx-card>
</div>
