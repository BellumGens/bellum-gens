<div class="overview-container-card">
  <igx-card type="outlined">
    <igx-card-header>
      <igx-avatar igxCardThumbnail [roundShape]="true" src="/assets/wallpapers/csgo-watermark.webp"></igx-avatar>
      <h1 igxCardHeaderTitle>CS:GO Лига</h1>
      <p><span class="highlight">ВАЖНО!</span> Групите за сезон 2 ще бъдат изтеглени седмицата на 1ви Септември.</p>
    </igx-card-header>
    <igx-card-content>
      <div class="participants-container">
        <h4 style="width: 100%">Участници</h4>
        <igx-circular-bar *ngIf="loading" [indeterminate]="true"></igx-circular-bar>
        <div *ngFor="let registration of registrations" class="registration-slot">
          <igx-avatar [src]="registration.Team.TeamAvatar"
                      [initials]="registration.Team.TeamName"
                      [title]="registration.Company"
                      size="medium"
                      [roundShape]="true">
          </igx-avatar>
          <igx-badge *ngIf="registration.UserId === authUser?.id && registration.State === 0"
                      type="warning"
                      icon="priority_high"
                      title="Вашата регистрация все още не е потвърдена! За да потвърдим регистрацията трябва да платите таксата за участие!"
                      class="registration-badge-style">
          </igx-badge>

          <a [href]="environment.bellumgens + '/team/' + registration.Team.CustomUrl" target="_blank">{{ registration.Team.TeamName }}</a>
        </div>
      </div>

      <h4 style="width: 100%">График</h4>
      <app-csgo-tournament-schedule>
      </app-csgo-tournament-schedule>

      <div class="group-columns">
        <igx-grid *ngFor="let group of groups"
                  [cellSelection]="selectionMode.none"
                  [data]="group.Participants"
                  [showToolbar]="true"
                  [toolbarTitle]="group.Name">

          <igx-column field="Team" header="Отбор" width="22%">
            <ng-template igxCell let-value>
              <igx-avatar igxListThumbnail
                          [src]="value.TeamAvatar"
                          [initials]="value.TeamName"
                          [roundShape]="true">
              </igx-avatar>
              <a igxListLineTitle [href]="environment.bellumgens + '/team/' + value.CustomUrl" target="_blank">
                {{ value.TeamName }}
              </a>
            </ng-template>
          </igx-column>

          <igx-column field="Company" header="Компания" width="15%">
          </igx-column>
          <igx-column field="Matches" [dataType]="gridDataType.Number" header="Срещи" width="9%">
          </igx-column>
          <igx-column field="Wins" [dataType]="gridDataType.Number" header="Победи" width="9%">
          </igx-column>
          <igx-column field="OTWins" [dataType]="gridDataType.Number" header="OT Победи" title="Победи в добавено време" width="9%">
          </igx-column>
          <igx-column field="OTLosses" [dataType]="gridDataType.Number" header="OT Загуби" title="Загуби в добавено време" width="9%">
          </igx-column>
          <igx-column field="Losses" [dataType]="gridDataType.Number" header="Загуби" width="9%">
          </igx-column>
          <igx-column field="RoundDifference" [dataType]="gridDataType.Number" header="+/- Рундове" width="9%">
            <ng-template igxCell let-value>
              <span [class]="value > 0 ? 'color-success' : value < 0 ? 'color-error' : ''">
                {{ value }}
              </span>
            </ng-template>
          </igx-column>
          <igx-column field="TeamPoints" [dataType]="gridDataType.Number" header="Точки" width="9%">
          </igx-column>

        </igx-grid>
      </div>

    </igx-card-content>
  </igx-card>
</div>
