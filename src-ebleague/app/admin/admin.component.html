<div class="content-container">
  <div class="column-center">
    <a *ngFor="let league of tournaments">{{league.Name}}: {{league.StartDate | date}} - {{league.EndDate | date}} <igx-checkbox [(ngModel)]="league.Active" (ngModelChange)="updateTournament(league)">Active</igx-checkbox></a>
    <span *ngIf="!tournaments || !tournaments.length">No tournaments</span>
  </div>

  <form #leagueForm="ngForm" (ngSubmit)="createTournament()">
    <igx-input-group>
      <label igxLabel for="tournamentName">Tournament name</label>
      <input type="text" id="tournamentName" name="tournamentName" #tournamentName igxInput required [(ngModel)]="tournament.Name" />
      <igx-suffix *ngIf="tournamentName.value" (click)="tournament.Name = null">
        <igx-icon>clear</igx-icon>
      </igx-suffix>
    </igx-input-group>

    <igx-date-picker label="Start Date" name="startDate" required [(ngModel)]="tournament.StartDate">

    </igx-date-picker>

    <igx-date-picker label="End Date" name="endDate" required [(ngModel)]="tournament.EndDate">

    </igx-date-picker>

    <button igxButton [disabled]="!leagueForm.valid || !leagueForm.touched">Submit</button>
  </form>
</div>

<div class="content-container">
  <div class="content-container-row">
    <igx-grid #grid1 [data]="registrations" [height]="'450px'" primaryKey="Id" (onCellEdit)="confirmRegistration($event, grid1)" [cellSelection]="'none'">

      <igx-column field="Email" header="Имейл Адрес">
      </igx-column>
      <igx-column field="CompanyId" header="Компания">
      </igx-column>
      <igx-column field="DateSubmitted" [dataType]="'date'" header="Направена на">
        <ng-template igxCell let-value>
          {{ value | date }}
        </ng-template>
      </igx-column>
      <igx-column field="Game" header="Лига">
        <ng-template igxCell let-value>
          {{ value ? 'StarCraft II' : 'CS:GO' }}
        </ng-template>
      </igx-column>
      <igx-column field="Hash" header="Код">
      </igx-column>
      <igx-column field="State" [editable]="true" [dataType]="'boolean'" header="Потвърдена">
        <ng-template igxCell let-value>
          <igx-icon [class]="value ? 'color-success' : 'color-error'">{{ value ? 'check' : 'close' }}</igx-icon>
        </ng-template>
      </igx-column>

    </igx-grid>
  </div>

  <div class="content-container-row">
    <igx-grid #grid1 [data]="orders" [height]="'450px'" primaryKey="id" (onCellEdit)="editDone($event, grid1)" [cellSelection]="'none'">

      <igx-column field="orderDate" header="Направена на">
        <ng-template igxCell let-value>
          {{ value | date }}
        </ng-template>
      </igx-column>
      <igx-column field="email" header="Имейл Адрес">
      </igx-column>
      <igx-column field="name" header="Име">
        <ng-template igxCell let-cell="cell">
          {{ cell.row.rowData.firstName }} {{ cell.row.rowData.lastName }}
        </ng-template>
      </igx-column>
      <igx-column field="phoneNumber" header="Телефон">
        <ng-template igxCell let-value>
          +359 {{ value }}
        </ng-template>
      </igx-column>
      <igx-column field="address" header="Адрес">
        <ng-template igxCell let-cell="cell">
          {{ cell.row.rowData.city }}, {{ cell.row.rowData.streetAddress }}
        </ng-template>
      </igx-column>
      <igx-column field="promocode" header="Промо код">
      </igx-column>
      <igx-column field="confirmed" [dataType]="'boolean'" [editable]="true" header="Потвърдена">
        <ng-template igxCell let-value>
          <igx-icon [class]="value ? 'color-success' : 'color-error'">{{ value ? 'check' : 'close' }}</igx-icon>
        </ng-template>
      </igx-column>
      <igx-column field="shipped" [dataType]="'boolean'" [editable]="true" header="Изпратена">
        <ng-template igxCell let-value>
          <igx-icon [class]="value ? 'color-success' : 'color-error'">{{ value ? 'check' : 'close' }}</igx-icon>
        </ng-template>
      </igx-column>

      <ng-template igxGridDetail let-dataItem>
        <div class="horizontal details-container space-evenly">
          <div class="column-center" *ngFor="let details of dataItem.jerseys">
            <img src="/assets/wallpapers/jersey-small.webp" alt="Esports Business League jersey" />
            <div>{{details.cut ? 'Дамска' : 'Мъжка'}}</div>
            <div class="highlight">{{ details.size | sizeName }}</div>
          </div>
        </div>
      </ng-template>
    </igx-grid>
  </div>
</div>

<div class="content-container">
  <div>
    <igx-chips-area>
      Roles
      <igx-chip *ngFor="let role of roles">{{role}}</igx-chip>
      <igx-chip *ngIf="!roles">No Roles Defined</igx-chip>
    </igx-chips-area>
    <igx-input-group>
      <label igxLabel>New role</label>
      <input type="text" #roleinput igxInput />
    </igx-input-group>
    <button igxButton (click)="submitRole(roleinput.value)">Submit</button>
  </div>

  <igx-list class="players-list">
    <igx-list-item *ngFor="let user of users">
      <igx-avatar igxListThumbnail [src]="user.AvatarMedium"></igx-avatar>
      <h2 igxListLineTitle>{{user.UserName}}</h2>


      <igx-chips-area>
        <igx-chip (onClick)="addAdmin(user.Id)">
          <igx-icon igxPrefit>add</igx-icon>
          <span>admin</span>
        </igx-chip>

        <igx-chip (onClick)="addEventAdmin(user.Id)">
          <igx-icon igxPrefit>add</igx-icon>
          <span>event-admin</span>
        </igx-chip>

        <igx-chip *ngIf="user.Roles.length">
          <igx-icon igxPrefit>remove</igx-icon>
          <span>admin</span>
        </igx-chip>
      </igx-chips-area>
    </igx-list-item>
  </igx-list>
</div>
