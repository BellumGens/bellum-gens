<div class="container">
  <h1 i18n>Bellum Gens Elite Stara Zagora 2026</h1>

  <p i18n>Pre-register to receive an exclusive discount on tickets.</p>
  <p class="info" i18n>Discount codes will be emailed when tickets go on sale at the beginning of 2026. Watch your inbox.</p>

  <div class="stats" i18n>Signed up users so far: <span class="highlight">{{ count() }}</span></div>
  <div class="discount current-discount" i18n>
    Current discount: <span class="highlight">{{ discount }}%</span>
  </div>
  <div class="tiers">
    <div class="tier" i18n>1 – 100 sign-ups: <span class="highlight">10%</span></div>
    <div class="tier" i18n>101 – 250 sign-ups: <span class="highlight">15%</span></div>
    <div class="tier" i18n>251 – 500 sign-ups: <span class="highlight">25%</span></div>
    <div class="tier" i18n>501+ sign-ups: <span class="highlight">33%</span></div>
  </div>

  @if (!authUser) {
    <div class="auth-info" i18n>
      <span class="highlight">You need to be logged in</span> to submit the form. Please log in from the profile menu.
    </div>
  }

  <form [formGroup]="form" (ngSubmit)="submit()" class="signup-form">
    <igx-input-group>
      <label igxLabel i18n>Email</label>
      <input igxInput id="email" type="email" formControlName="email" />
    </igx-input-group>
    @if (form.controls.email.touched && form.controls.email.invalid) {
      <div class="error" i18n>
        Please enter a valid email.
      </div>
    }

    <igx-checkbox formControlName="firstTime">
      <span igxLabel i18n>This is my first Bellum Gens Elite event</span>
    </igx-checkbox>

    <igx-checkbox formControlName="agreePrivacy">
      <span igxLabel i18n>I agree that the provided email address <a href="/privacy" target="_blank" rel="noopener">will receive information about BGE Stara Zagora 2026</a></span>
    </igx-checkbox>
    @if (form.controls.agreePrivacy.touched && form.controls.agreePrivacy.invalid) {
      <div class="error" i18n>
        Please agree to the privacy terms to proceed.
      </div>
    }

    <button igxButton="contained" type="submit" [disabled]="!authUser || submitting()" i18n>Submit</button>
  </form>

  <!-- Success and error messaging handled via CommunicationService -->
</div>
